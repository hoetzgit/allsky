{"loadimage": {"module": "allsky_loadimage.py", "metadata": {"name": "Loads the latest image", "description": "Loads the last captured image", "module": "allsky_loadimage", "events": {"0": "day", "1": "night"}, "experimental": false, "arguments": {}}, "type": "system", "enabled": true, "position": "first", "lastexecutiontime": "472.36699999999996", "lastexecutionresult": "Image /home/pi/allsky/tmp/image-20221212072013.jpg Loaded"}, "export": {"module": "allsky_export.py", "metadata": {"name": "AllSKY Export", "description": "Exports AllSKY data to json", "module": "allsky_export", "events": {"0": "day", "1": "night"}, "arguments": {"filelocation": "${ALLSKY_TMP}/allskydata.json", "extradata": "CAMERA_TYPE,DAY_OR_NIGHT,CURRENT_IMAGE,FULL_FILENAME,ALLSKY_VERSION"}, "argumentdetails": {"filelocation": {"required": "true", "description": "File Location", "help": "The location to save the json date"}, "extradata": {"required": "false", "description": "Extra data to export", "help": "Comma seperated list of additional variables to export to json"}}, "experimental": false}, "type": "system", "enabled": true, "lastexecutiontime": "1.5250000000000001", "lastexecutionresult": "Allsky data exported to /home/pi/allsky/tmp/allskydata.json"}, "clearsky": {"module": "allsky_clearsky.py", "metadata": {"name": "Clear Sky Alarm", "description": "Clear Sky Alarm", "module": "allsky_clearsky", "version": "v1.0.0", "events": {"0": "day", "1": "night"}, "experimental": true, "arguments": {"detectionThreshold": "0.55", "distanceThreshold": "20", "annotate": false, "template1": "6", "mask": "", "debug": false, "clearvalue": "10", "roi": "1925,1443,2128,1595", "roifallback": "5", "mqttenable": false, "mqttbroker": "", "mqttport": "1883", "mqttusername": "", "mqttpassword": "", "mqtttopic": "SKYSTATE", "debugimage": ""}, "argumentdetails": {"roi": {"required": "true", "description": "Region of Interest", "help": "The area of the image to check for clear skies. Format is x1,y1,x2,y2", "type": {"fieldtype": "roi"}}, "roifallback": {"required": "true", "description": "Fallback %", "help": "If no ROI is set then this % of the image, from the center will be used", "type": {"fieldtype": "spinner", "min": 1, "max": 100, "step": 1}}, "clearvalue": {"required": "true", "description": "Clear Sky", "help": "If more than this number of stars are found the sky will be considered clear", "type": {"fieldtype": "spinner", "min": 1, "max": 1000, "step": 1}}, "detectionThreshold": {"required": "true", "description": "Detection Threshold", "help": "The limit at which stars will be detected", "type": {"fieldtype": "spinner", "min": 0.05, "max": 1, "step": 0.01}}, "distanceThreshold": {"required": "true", "description": "Distance Threshold", "help": "Stars within this number of pixels of another star will not be counted. Helps to reduce errors in the count", "type": {"fieldtype": "spinner", "min": 0, "max": 100, "step": 1}}, "template1": {"required": "true", "description": "Star Template size", "help": "Size in pixels of the star template.", "type": {"fieldtype": "spinner", "min": 0, "max": 100, "step": 1}}, "mask": {"required": "false", "description": "Mask Path", "help": "The name of the image mask. THis mask is applied when counting stars bit not visible in the final image", "type": {"fieldtype": "image"}}, "annotate": {"required": "true", "description": "Annotate Stars", "help": "If selected the identified stars in the image will be highlighted", "tab": "Debug", "type": {"fieldtype": "checkbox"}}, "debug": {"required": "false", "description": "Enable debug mode", "help": "If selected each stage of the detection will generate images in the allsky tmp debug folder", "tab": "Debug", "type": {"fieldtype": "checkbox"}}, "debugimage": {"required": "false", "description": "Debug Image", "help": "Image to use for debugging. DO NOT set this unless you know what you are doing", "tab": "Debug"}, "mqttenable": {"required": "false", "description": "Enable MQTT", "help": "Enable updates to a MQTT Broker", "tab": "MQTT", "type": {"fieldtype": "checkbox"}}, "mqttbroker": {"required": "false", "description": "MQTT Broker address", "help": "MQTT Broker address", "tab": "MQTT"}, "mqttport": {"required": "false", "description": "MQTT Broker port", "help": "MQTT Broker port", "tab": "MQTT", "type": {"fieldtype": "spinner", "min": 1, "max": 65536, "step": 1}}, "mqttusername": {"required": "false", "description": "MQTT Username", "help": "MQTT Username", "tab": "MQTT"}, "mqttpassword": {"required": "false", "description": "MQTT Pasword", "help": "MQTT Password", "tab": "MQTT"}, "mqtttopic": {"required": "false", "description": "MQTT Topic", "help": "MQTT Topic the sky state is published to", "tab": "MQTT"}}, "enabled": "false"}, "type": "system", "enabled": true, "lastexecutiontime": "30.838", "lastexecutionresult": "Sky is NOT Clear"}, "overlay": {"module": "allsky_overlay.py", "metadata": {"name": "Overlays data on the image", "description": "Overlays data fields on the image", "module": "allsky_overlay", "events": {"0": "day", "1": "night"}, "arguments": {"debug": "false"}, "argumentdetails": {"debug": {"required": "false", "description": "Enable debug mode", "help": "If selected all environment variables will be written to the overlaydebug.txt file in the AllSky tmp folder", "type": {"fieldtype": "checkbox"}}}, "experimental": false}, "type": "system", "enabled": true, "lastexecutiontime": "0.059", "lastexecutionresult": "External Overlay Disabled"}, "sqm": {"module": "allsky_sqm.py", "metadata": {"name": "Sky Quality", "description": "Calculates sky quality", "module": "allsky_sqm", "version": "v1.0.0", "events": {"0": "night"}, "experimental": true, "arguments": {"mask": "", "roi": "967,929,3132,2348", "debug": false, "debugimage": "", "roifallback": "5", "formula": ""}, "argumentdetails": {"mask": {"required": "false", "description": "Mask Path", "help": "The name of the image mask. This mask is applied prior to calculating the sky quality", "type": {"fieldtype": "image"}}, "roi": {"required": "true", "description": "Region of Interest", "help": "The area of the image to check for sky quality. Format is x1,y1,x2,y2", "type": {"fieldtype": "roi"}}, "roifallback": {"required": "true", "description": "Fallback %", "help": "If no ROI is set then this % of the image, from the center will be used", "type": {"fieldtype": "spinner", "min": 1, "max": 100, "step": 1}}, "formula": {"required": "true", "description": "Adjustment Forumla", "help": "Formula to adjust the read value. This forumla can use only Pythons inbuilt maths functions and basic mathematical operators. Please see the documentation for more details of the formula variables available"}, "debug": {"required": "false", "description": "Enable debug mode", "help": "If selected each stage of the detection will generate images in the allsky tmp debug folder", "tab": "Debug", "type": {"fieldtype": "checkbox"}}, "debugimage": {"required": "false", "description": "Debug Image", "help": "Image to use for debugging. DO NOT set this unless you know what you are doing", "tab": "Debug"}}, "enabled": "false"}, "type": "user", "enabled": true, "lastexecutiontime": "25.687", "lastexecutionresult": "Final SQM Mean calculated as 59.0019667104473"}, "saveimage": {"module": "allsky_saveimage.py", "metadata": {"name": "Saves the image", "description": "Saves the image", "module": "allsky_saveimage", "events": {"0": "day", "1": "night"}, "experimental": false, "arguments": {}}, "type": "system", "enabled": true, "position": "last", "lastexecutiontime": "467.949", "lastexecutionresult": "Image /home/pi/allsky/tmp/image-20221212072013.jpg Saved, quality 100"}}